{"version":3,"file":"static/webpack/static/development/pages/index.js.a45ac83c5d3583e8304c.hot-update.js","sources":["webpack:///./src/components/footer.tsx"],"sourcesContent":["import { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Icon, { Size } from 'components/icon';\nimport { createFile, updateStatus } from 'actions/files';\nimport { MAX_CHUNK_THRESHOLD } from 'lib/bytes';\nimport strategize from 'lib/strategize';\nimport color from 'styles/color';\nimport { FileStatus, Store } from 'store/types';\n\ntype Props = {\n    openFileDialog: () => void;\n};\n\nconst Footer: React.FunctionComponent<Props> = (props: Props) => {\n    const dispatch = useDispatch();\n    const [keyset, files] = useSelector((state: Store) => [\n        state.keyset.file,\n        state.files.files,\n    ]);\n    const readyFiles = files.filter(file => file.status === FileStatus.Ready || file.status === FileStatus.Pending);\n\n    const convert = useCallback(() => {\n        const [convertFiles, pendingFiles] = strategize(files);\n        console.log(files.reduce((acc, file) => acc + file.size, 0));\n        // convertFiles.forEach(file => dispatch(createFile(file.id, file)));\n        // pendingFiles.forEach(file => dispatch(updateStatus(file.id, FileStatus.Pending)));\n        console.log([convertFiles, pendingFiles]);\n    }, [files]);\n\n    const isButtonDisabled = !keyset || !readyFiles.length;\n    const keysetStatusColor =\n        keyset && keyset.name ? color.deYorkGreen : color.oldGold;\n\n    return (\n        <div className=\"footer\">\n            <div className=\"keyset-section\" onClick={props.openFileDialog}>\n                <Icon\n                    solid\n                    name=\"key\"\n                    className=\"keyset-icon\"\n                    color={keysetStatusColor}\n                />\n                <p className=\"keyset-status\">\n                    Keyset{' '}\n                    {keyset ? (\n                        <>\n                            loaded:\n                            <code className=\"keyset-name\">{keyset.name}</code>\n                        </>\n                    ) : (\n                        'not loaded'\n                    )}\n                </p>\n            </div>\n            <button\n                onClick={convert}\n                disabled={isButtonDisabled}\n                className=\"convert-button\"\n            >\n                convert\n            </button>\n            <style jsx>{`\n                .footer {\n                    height: 30px;\n                    display: flex;\n                    padding: 10px 17px;\n                    align-items: center;\n                    justify-content: space-between;\n                    background-color: ${color.alabaster};\n                    border-top: 1px solid ${color.catskillWhite};\n                    border-bottom-left-radius: 15px;\n                    border-bottom-right-radius: 15px;\n                }\n                .keyset-section {\n                    display: flex;\n                    align-items: center;\n                    user-select: none;\n                    cursor: pointer;\n                    color: ${keysetStatusColor};\n                    font-weight: ${keyset ? 'normal' : 'bold'};\n                }\n                .keyset-section:hover {\n                    opacity: 0.8;\n                }\n                .keyset-name {\n                    padding: 0 4px;\n                    font-size: 14px;\n                    font-variant: normal;\n                }\n                .keyset-status {\n                    margin: 0;\n                    padding: 0 4px;\n                    font-size: 17px;\n                    font-variant: all-small-caps;\n                }\n                .convert-button {\n                    border: none;\n                    display: flex;\n                    font-size: 20px;\n                    border-radius: 4px;\n                    align-items: center;\n                    font-variant: small-caps;\n                    padding: 4px 25px 7px 25px;\n                    opacity: ${isButtonDisabled ? 0.5 : 1};\n                    color: ${color.alabaster};\n                    background-color: ${color.chetwodeBlue};\n                }\n                .convert-button:hover {\n                    opacity: ${isButtonDisabled ? `'inherit'` : 0.9};\n                }\n            `}</style>\n        </div>\n    );\n};\n\nexport default Footer;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AAKA;AACA;AACA;AAFA;AAEA;AAAA;AAFA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AApBA;AAAA;AAAA;AAAA;AA+EA;AACA;AACA;;;;A","sourceRoot":""}